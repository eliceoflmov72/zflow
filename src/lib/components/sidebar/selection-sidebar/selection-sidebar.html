<sidebar 
  [title]="'Selección Múltiple (' + selectionService.selectedNodeIds().length + ')'" 
  position="right" 
  (close)="selectionService.setSelection([])"
>
  <div class="ff-section-label">Editar Objetos</div>
  <div class="ff-object-gallery" style="display: none;"></div>
  <visual-objects-tab
    [currentShape]="null"
    (selectShape)="$event ? updateSelectedNodes.emit({ shape3D: $event, active: true }) : updateSelectedNodes.emit({ active: false })"
  ></visual-objects-tab>

  <div class="ff-section-label">Color de Objetos</div>
  <div class="ff-row" style="margin-bottom: 0.5rem;">
    <div class="ff-field">
      <input
        type="color"
        (input)="updateSelectedNodes.emit({ color: $any($event.target).value })"
        style="width: 100%;"
      />
    </div>
  </div>
  <!-- Recent Colors -->
  @if (recentColors().length > 0) {
    <div class="ff-recent-colors">
      @for (color of recentColors(); track color) {
        <div
          class="ff-color-swatch"
          [style.background-color]="color"
          (click)="updateSelectedNodes.emit({ color: color })"
        ></div>
      }
    </div>
  }

  <div class="ff-section-label">Color de Suelo</div>
  <div class="ff-row" style="margin-bottom: 0.5rem;">
    <div class="ff-field">
      <input
        type="color"
        (input)="updateSelectedNodes.emit({ floorColor: $any($event.target).value })"
        style="width: 100%;"
      />
    </div>
  </div>
  @if (recentColors().length > 0) {
    <div class="ff-recent-colors">
      @for (color of recentColors(); track color) {
        <div
          class="ff-color-swatch"
          [style.background-color]="color"
          (click)="updateSelectedNodes.emit({ floorColor: color })"
        ></div>
      }
    </div>
  }

  <button class="ff-btn-delete" (click)="deleteSelected.emit()">
    <i class="pi pi-trash"></i> Eliminar Seleccionados
  </button>
</sidebar>
