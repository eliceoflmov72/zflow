<sidebar title="Modo Pintura" position="right" [showCloseButton]="false">
  <div class="ff-section-label">Modo de Pintado</div>
  <div class="ff-switch-group">
    <button
      class="ff-tool-btn"
      [class.active]="paintTool() === 'rectangle'"
      (click)="paintTool.set('rectangle')"
      title="Pintar Zona (Rect치ngulo)"
    >
      Zona
    </button>
    <button
      class="ff-tool-btn"
      [class.active]="paintTool() === 'brush'"
      (click)="paintTool.set('brush')"
      title="Pincel Libre"
    >
      Pincel
    </button>
  </div>

  <!-- Toggles for Layers -->
  <div class="ff-section-label">Capas Activas</div>
  <div class="ff-switch-group">
    <button
      class="ff-tool-btn"
      [class.active]="paintObjectEnabled()"
      (click)="paintObjectEnabled.set(!paintObjectEnabled())"
      title="Activar Capa de Objetos"
    >
      Objetos
    </button>
    <button
      class="ff-tool-btn"
      [class.active]="paintFloorEnabled()"
      (click)="paintFloorEnabled.set(!paintFloorEnabled())"
      title="Activar Capa de Suelo"
    >
      Suelo
    </button>
  </div>

  @if (paintObjectEnabled()) {
    <div class="ff-section-label">Configuraci칩n Objeto</div>
    <visual-objects-tab
      [currentShape]="brushShape()"
      [allowClear]="false"
      (selectShape)="brushShape.set($event || '')"
    ></visual-objects-tab>

    @if (!isImageShape()) {
      <div class="ff-row" style="margin-bottom: 0.5rem">
        <div class="ff-field">
          <label>Color Objeto</label>
          <input
            type="color"
            [value]="brushObjectColor()"
            (input)="brushObjectColor.set($any($event.target).value)"
            style="width: 100%"
          />
        </div>
      </div>
      <!-- Recent Object Colors -->
      @if (recentColors().length > 0) {
        <div class="ff-recent-colors">
          @for (color of recentColors(); track color) {
            <div
              class="ff-color-swatch"
              [style.background-color]="color"
              (click)="brushObjectColor.set(color)"
              [title]="color"
            ></div>
          }
        </div>
      }
    } @else {
      <div class="ff-info-text" style="font-size: 0.75rem; color: #64748b; margin-top: 0.5rem; padding: 0 0.5rem;">
        Las im치genes no permiten cambiar el color.
      </div>
    }
  }

  @if (paintFloorEnabled()) {
    <div class="ff-section-label" style="margin-top: 1rem">Configuraci칩n Suelo</div>
    <div class="ff-row" style="margin-bottom: 0.5rem">
      <div class="ff-field">
        <label>Color Suelo</label>
        <input
          type="color"
          [value]="brushFloorColor()"
          (input)="brushFloorColor.set($any($event.target).value)"
          style="width: 100%"
        />
      </div>
    </div>
    <!-- Recent Floor Colors -->
    @if (recentColors().length > 0) {
      <div class="ff-recent-colors">
        @for (color of recentColors(); track color) {
          <div
            class="ff-color-swatch"
            [style.background-color]="color"
            (click)="brushFloorColor.set(color)"
            [title]="color"
          ></div>
        }
      </div>
    }
  }
</sidebar>
